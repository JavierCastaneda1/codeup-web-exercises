<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Maps Exercise</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet">
    <script rel="script" src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script>
    <script src="js/mapbox-geocode-utils.js"></script>
    <script src="js/keys.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { width: 100%; height: 400px; }
    </style>
</head>
<body>
<div id="map"></div>

<script>
    mapboxgl.accessToken = mapboxKey;
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v12',
        center: [-98.4916, 29.4252], // starting position [lng, lat]
        zoom: 10 // starting zoom
    });

    // let alamoInfo = {
    //     address: "The Alamo",
    //     popupHTML: "<p>Remember the Alamo!</p>"
    // };

    // function placeMarkerAndPopup(info, token, map) {
    //     geocode(info.address, token).then(function (coordinates){
    //         let popup = new mapboxg1.Popup()
    //             .setHTML(info.popupHTML);
    //         let marker = new mapboxg1.Marker()
    //             .setLngLat(coordinates)
    //             .addTo(map)
    //             .setPopup(popup);
    //         popup.addTo(map);
    //     });
    // }
    //
    // placeMarkerAndPopup(alamoInfo, accessToken, map);



    geocode("6710 Loma Corona, San Antonio, TX 78205", mapboxKey).then(function(result) {
        console.log(result);
        map.setCenter(result);
        map.setZoom(20);
        return result;
    }).then(function(result){
        let popup = new mapboxgl.Popup()
            .setLngLat(result)
            .setHTML("<p>This is my home!</p>")   //don't forget to use the p tags!
            .addTo(map)
        let alamoPopup = new mapboxg1.Popup()
            .setHTML("<p>Remember the Alamo</p>")

        marker.setPopup(alamoPopup)
            // .setPopup(popup);
        // popup.addTo(map);
    })









</script>
</body>
</html>